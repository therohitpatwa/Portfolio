---
import { Icon } from "astro-icon/components";
import AccordionLayout from "../layouts/AccordionLayout.astro";
import * as about from "../pages/about/about.md";
import Card from "./Card.astro";
import ContactCard from "./ContactCard.astro";
const works = await Astro.glob("../pages/works/*.md");
const projects = await Astro.glob("../pages/projects/*.md");
const studies = await Astro.glob("../pages/studies/*.md");
const contact = await Astro.glob("../pages/contact/*.md");

// Flat list of skills - no categories
// Icon sets available: carbon, mdi
const skillCapsules: { label: string; icon: string }[] = [
  { label: "C", icon: "mdi:language-c" },
  { label: "Java", icon: "mdi:language-java" },
  { label: "Spring Core", icon: "mdi:leaf" },
  { label: "Spring Boot", icon: "mdi:sprout" },
  { label: "Spring Security", icon: "mdi:shield-lock" },
  { label: "Microservices", icon: "mdi:lan" },
  { label: "Servlet", icon: "mdi:server" },
  { label: "JUnit", icon: "mdi:test-tube" },
  { label: "Mockito", icon: "mdi:test-tube" },
  { label: "HTML", icon: "mdi:language-html5" },
  { label: "CSS", icon: "mdi:language-css3" },
  { label: "JavaScript", icon: "mdi:language-javascript" },
  { label: "React.js", icon: "mdi:react" },
  { label: "MySQL", icon: "mdi:database" },
  { label: "JDBC", icon: "mdi:database" },
  { label: "Redis", icon: "mdi:database" },
  { label: "Kafka", icon: "mdi:message" },
  { label: "Swagger", icon: "mdi:api" },
  { label: "Docker", icon: "mdi:docker" },
  { label: "Git", icon: "mdi:git" },
  { label: "GitHub", icon: "mdi:github" },
  { label: "Maven", icon: "mdi:hammer-wrench" },
  { label: "Linux", icon: "mdi:linux" },
  { label: "Vercel", icon: "mdi:triangle-outline" },
 
];
const PDF = "/MyResume.pdf";
---

<div class="join join-vertical gap-1">
  <AccordionLayout title={"About"} icon={"carbon:identification"}>
    <article class="text-justify">
      <Fragment set:html={about.compiledContent()} />
    </article>
  </AccordionLayout>

  <AccordionLayout title={"Work"} icon={"carbon:construction"}>
    {
      works.map((item) => {
        return (
          <Card
            title={item.frontmatter.title}
            timeframe={item.frontmatter.date}
            description={item.compiledContent()}
            tags={item.frontmatter.tags}
            url={item.frontmatter.url}
            url_name={item.frontmatter.org}
            location={item.frontmatter.location}
          />
        );
      })
    }
  </AccordionLayout>

  <AccordionLayout title={"Studies"} icon={"carbon:education"}>
    {
      studies.map((item) => {
        return (
          <Card
            title={item.frontmatter.title}
            timeframe={item.frontmatter.date}
            location={item.frontmatter.location}
            tags={item.frontmatter.tags}
            url={item.frontmatter.url}
            url_name="Visit College"
          />
        );
      })
    }
  </AccordionLayout>

  <AccordionLayout title={"Skills"} icon={"carbon:skill-level"}>
    <div class="flex flex-wrap gap-2">
      {skillCapsules.map((skill) => (
        <span class="badge badge-outline flex items-center gap-1">
          <Icon name={skill.icon} class="w-4 h-4" />
          {skill.label}
        </span>
      ))}
    </div>
  </AccordionLayout>

  <AccordionLayout title={"Projects"} icon={"carbon:tools"}>
    {
      projects.map((item) => {
        return (
          <Card
            title={item.frontmatter.title}
            timeframe={item.frontmatter.date}
            description={item.compiledContent()}
            tags={item.frontmatter.tags}
            url={item.frontmatter.url}
            url_name={item.frontmatter.url_name || "Live"}
            github_url={item.frontmatter.github_url}
            demo_url={item.frontmatter.demo_url}
            blog_url={item.frontmatter.blog_url}
          />
        );
      })
    }
  </AccordionLayout>

  <AccordionLayout title={"Blog"} icon={"carbon:blog"}>
    <div class="text-center text-secondary py-8">
      <Icon name="carbon:blog" class="w-12 h-12 mx-auto mb-4 opacity-50" />
      <p>Tech concepts? I make them blog-worthy.</p>
      <div class="mt-4">
        <a href="https://therohitpatwa.hashnode.dev/" target="_blank" rel="noopener noreferrer" class="btn btn-outline btn-primary">
          <Icon name="carbon:blog" class="w-4 h-4 mr-2" />
          Explore Articles
        </a>
      </div>
    </div>
  </AccordionLayout>

  <AccordionLayout title={"Files"} icon={"carbon:volume-file-storage"}>
    <div class="flex justify-center w-full">
      <div
        class="card card-compact card-bordered border-[oklch(var(--s))] w-96 md:w-112 lg:w-128 hover:shadow-lg transition-all"
      >
        <figure>
          <object data={PDF} type="application/pdf" width="100%"></object>
        </figure>
        <div class="card-body">
          <h2 class="card-title">Resume</h2>
          <p>View and download my resume by clicking on the button below</p>
          <div class="card-actions justify-end">
            <a target="public/MyResume.pdf" href={PDF}>
              <button class="btn btn-outline">
                <p>Download resume</p>
                <Icon name="carbon:document-pdf" class="w-6 h-6 ml-1" />
              </button>
            </a>
          </div>
        </div>
      </div>
    </div>
  </AccordionLayout>

  <AccordionLayout title={"Contact"} icon={"carbon:location-person"}>
    <div class="flex flex-wrap content-around gap-4 justify-center">
      {
        contact.map((item) => {
          return (
            <ContactCard
              url={item.frontmatter.url}
              url_name={item.frontmatter.title}
              icon={item.frontmatter.icon}
            />
          );
        })
      }
    </div>
  </AccordionLayout>
</div>
